<!DOCTYPE html>
<html lang="gb" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Timesheet Archive</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<div class="container mt-5">
    <div class="card">
        <div class="card-body p-4">
            <h2 class="text-center mb-4">Timesheet Archive</h2>

            <form id="filterForm" class="mb-4">
                <div class="row">
                    <div class="col-md-4">
                        <select name="clientId" class="form-select">
                            <option value="">All Clients</option>
                            <option th:each="client : ${clients}"
                                    th:value="${client.id}"
                                    th:text="${client.clientName}"
                                    th:selected="${client.id == param.clientId}">
                            </option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <select name="invoiced" class="form-select">
                            <option value="">All Status</option>
                            <option value="true">Invoiced</option>
                            <option value="false">Not Invoiced</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <button type="submit" class="nav-button">Filter</button>
                    </div>
                </div>
            </form>

            <div class="table-container">
                <table class="table">
                    <thead>
                    <tr>
                        <th>Date</th>
                        <th>Client</th>
                        <th>Duration</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="timesheet : ${timesheets}">
                        <td th:text="${#temporals.format(timesheet.serviceDate, 'dd.MM.yyyy')}"></td>
                        <td th:text="${timesheet.clientName}"></td>
                        <td class="text-end" th:text="${timesheet.duration}"></td>
                        <td th:text="${timesheet.isInvoice ? 'Invoiced' : 'Not Invoiced'}"></td>
                        <td>
                            <button th:if="${timesheet.isInvoice}"
                                    class="edit-button"
                                    th:onclick="'detachTimesheet(' + ${timesheet.id} + ')'">
                                Detach
                            </button>
                            <button th:unless="${timesheet.isInvoice}"
                                    class="del-button"
                                    th:onclick="'deleteTimesheet(' + ${timesheet.id} + ')'">
                                Delete
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <div class="mt-4">
                <a href="/" class="nav-button">Back to Main Page</a>
            </div>
        </div>
    </div>
</div>

<script th:src="@{/js/timesheet-archive.js}"></script>
</body>
</html>
